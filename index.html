<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Soccer player analysis</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <link rel="stylesheet" href="stylesheets/d3_styles.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/favicon-194x194.png" sizes="194x194">
    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
    <link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
    <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="msapplication-TileImage" content="/mstile-144x144.png">
    <meta name="theme-color" content="#b38e8e">
    
    <script type="text/javascript" src="http://d3js.org/d3.v3.min.js"></script>
    <!Code for the D3 visualization>
    <script type="text/javascript"></script>
    <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.v0.6.3.js"></script>
    <script src="javascripts/d3_js.js"></script>
    <style type="text/css">
            circle:hover {
                fill: orange;
            }
            .btn {
                background: #3498db;
                background-image: -webkit-linear-gradient(top, #3498db, #2980b9);
                background-image: -moz-linear-gradient(top, #3498db, #2980b9);
                background-image: -ms-linear-gradient(top, #3498db, #2980b9);
                background-image: -o-linear-gradient(top, #3498db, #2980b9);
                background-image: linear-gradient(to bottom, #3498db, #2980b9);
                -webkit-border-radius: 4;
                -moz-border-radius: 4;
                border-radius: 4px;
                font-family: Arial;
                color: #ffffff;
                font-size: 13px;
                padding: 4px 4px 4px 4px;
                text-decoration: none;
            }
            .btn:hover {
                background: #3cb0fd;
                background-image: -webkit-linear-gradient(top, #3cb0fd, #3498db);
                background-image: -moz-linear-gradient(top, #3cb0fd, #3498db);
                background-image: -ms-linear-gradient(top, #3cb0fd, #3498db);
                background-image: -o-linear-gradient(top, #3cb0fd, #3498db);
                background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
                text-decoration: none;
            }
            .header-cont {
                width:100%;
                position:fixed;
                top:0px;
                height:120px;
                background-image:url('logos/pattern_bg.png')
            }
            .wrapper{
                margin-top:90px;
            }
            .content {
                margin-left: auto;
                margin-right: auto;
                table-layout: fixed;
                border-collapse: collapse;
                z-index: -1; position:relative
            }
    </style>
  </head>
  <body>
    <div class="header-cont">
      <img src = "logos/Arsenal_FC.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/PSG.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/BayernMunich.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/Real_Madrid.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/FC_Barcelona.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/Juventus.png" width = 8% height = 100 style="border-style: none">
      <img src = "logos/BorussiaDortmund.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/Inter_Milan.png" width = 10% height = 100 style="border-style: none">
      <img src = "logos/Chelsea_FC.png" width = 10% height = 100 style="border-style: none">
    </div>
  
    <div class="wrapper">
      <header>
        <h1 class="header">cs109-FIFA</h1>
        <p class="header">Repository for CS109 Final Project</p>

        <ul>
          <li><a class="sbuttons" href="https://github.com/cs109-FIFA/cs109-FIFA/blob/master/Process%20Workbook.ipynb">Process Notebook</a></li>
          <li class="download"><a class="buttons" href="https://github.com/twkillian/cs109-FIFA/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/twkillian/cs109-FIFA">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/twkillian">Taylor Killian</a>, <a class="header name" href="https://github.com/abhishekmalali">Abhishek Malali</a> and <a class="header name" href="https://github.com/virgodi">Virgile Audi</a></p>


      </header> 
        
      <section>
        <h1>
<a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Evaluation of Soccer player performance</h1>

<p>In this respository, we will store the data, create the relevant .ipynb workbooks and compile other information we need to complete the requirements for our Fall '15 CS109 Data Science Course'</p>
      </section>
      <section>
        <h1>
            <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Data scraping</h1>

        <p>The transfer values were scraped from the Wikipedia link for transfers for every league for a season. The French and the German league did not have transfer values mentioned for the season's under consideration. The Spanish league did not have transfer data available for the summer of 2014.</p>
    </section>
      <!Section 1 - How transfer market has behaved>
      <!Insert all images inside div with class content>
      <section>
        <h1>
        <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Player transfer market over the years</h1>

        <p>The player transfer market has seen ever increasing transfer amounts over the years. Ever increasing broadcasting deals have made the leagues richer which has reflected in the spending.</p>
        <div class="content">
        <img src='images/amountperyear.png' height=600 align='middle' style="border-style: none">
        </div>
        <p>We looked at the top 100 transfers in the last 20 years. The last five years alone account for 65 transfers in the top 100 list with the transfer record being shattered twice. This trend motivated us to investigate if the market was inflated and whether or not the players justified their value for the respective transfer amount.</p>
        <div class="content">
        <img src='images/numperyear.png' height=600 align='middle' style="border-style: none">
        </div>
      </section>
      <!Inserting the D3 Visualization>
      <section>
          <h1>
        <a id="transfer-plot" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Plot comparing transfers across leagues</h1>
        <div id="wrapper">
        <div id="england">
        <input name="engButton" 
           type="button"
           class='btn'
           value="English League" 
           onclick="viewEngland()" />
        </div>
        <div id="spain">
        <input name="engButton" 
           type="button"
           class='btn'
           value="Spanish League" 
           onclick="viewSpain()" />
        </div>
        <div id="italy">
        <input name="engButton" 
           type="button"
           class='btn'
           value="Italian League" 
           onclick="viewItaly()" />
        </div>
        <div id="sval">
        <input name="engButton" 
           type="button"
           class='btn'
           value="By Season Value" 
           onclick="viewSeasonValue()" />
        </div>
        <div id="goals">
        <input name="engButton" 
           type="button" 
           class='btn'
           value="By Goals" 
           onclick="viewGoals()" />
        </div>
        <div id="assists">
        <input name="engButton" 
           type="button"
           class='btn'
           value="By Assists" 
           onclick="viewAssists()" />
        </div>
    </div>
    <div id="chartline1" ></div> 
      </section>
    
    <section>
        <h1>
        <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Metric used for player Valuation</h1>

        <p>Relevant details about the metric.</p>
    </section>
    <section>
        <h1>
        <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Top players over the period</h1>

        <p>Using traditional statistics, we look at the best players in terms of goals and assists. The first plot show the best players for the season of 2012-13.</p>
        <div class="content">
        <img src='images/2012-13-top20-traditional.jpg' height=330 align='middle' style="border-style: none">
        </div>
        <p>We evaluate the top players for the season of 2012-13 using the metric which we have defined.</p>
        <div class="content">
        <img src='images/2012-13-top20-metric.jpg' height=330 align='middle' style="border-style: none">
        </div>
        <p>Comparing our proposed metric with the traditional statistics,</p>
        <div class="content">
        <img src='images/rankingDiff.jpg' height=500 align='middle' style="border-style: none">
        </div>
        <p>For the two most recognisable players, Lionel Messi and Cristiano Ronaldo we see how their scores evolve over the season in the plot below. A consistent performance in most games is the desirable trend we want to see with the succesfull forwards.</p>
        <div class="content">
        <img src='images/messi-vs-ronaldo-12-13.jpg' height=350 align='middle' style="border-style: none">
        </div>
        <p>To check consistency of our metric against what really transpired in the season, we add up all the scores for the players in a team and rank them. We then compare this ranking to the actual ranking of the team achieved in the season. As the plot shows below, the rankings predicted by our measure were close to actual results and showed a correlation of 0.73. This is due to us giving consideration to the attacking statistics and lack of freely available defensive statistics data.</p>
        <div class="content">
        <img src='images/correlation-plot-bpl-12-13.jpg' height=500 align='middle' style="border-style: none">
        </div>
        <p>For the spanish league for the season 2012-13 we did find or rankings to be much closer to the final rankings. In this case the correlation was 0.92.</p>
        <div class="content">
        <img src='images/correlation-plot-spl-12-13.jpg' height=500 align='middle' style="border-style: none">
        </div>
      </section>
      <section>
        <h1>
        <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Clustering the players on the basis of metrics</h1>

        <p>We cluster the players on the data we have and the mtrics formulated by us to see which players perform similarly. We found clusters of similar minded players for both seasons. An interesting way of looking at performance would be find players who move between clusters over seasons. This can indicate an improvement or decrement in performance over seasons.</p>
        <iframe width="600" height="500" frameborder="0" scrolling="no" src="https://plot.ly/~AbhishekMalali/20.embed" class="iframe-class"></iframe>
        <iframe width="600" height="500" frameborder="0" scrolling="no" src="https://plot.ly/~AbhishekMalali/24.embed" class="iframe-class"></iframe>
         
    </section>
    <section>
        <h1>
            <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Validating our metric</h1>

        <p>We train a few classifiers to identify whether or not we can predict calculated value from one season to the next. Initially, we will train a random forest classifier on a 70/30 train/test split from the 2012-2013 season.</p>
        <p>Using the data, we run a Random forest regressor to figure out the most domninating features in the data.</p>
        <div class="content">
        <img src='images/feature-importance.jpg' height=450 align='middle' style="border-style: none">
        </div>
        <p>Here we see that the importance of the 'avg_value' and 'avg_value_smoothed' features far outweigh the others. After seeing this, we'll remove the two of them and only use the incremented totals for goals and assists.</p>
        <div class="content">
        <img src='images/feature-importance-corrected.jpg' height=450 align='middle' style="border-style: none">
        </div>
        <p>After training and predicting, we see a tight grouping around the 45 degree line.</p>
        <div class="content">
        <img src='images/actual-vs-predicted-2012-13.jpg' height=450 align='middle' style="border-style: none">
        </div>
        <p>After training and predicting on the 2013-14 dataset.</p>
        <div class="content">
        <img src='images/actual-vs-predicted-2013-14.jpg' height=450 align='middle' style="border-style: none">
        </div>
        <p>We use a linear regressor to predict and we find a very high accuracy for both the seasons.</p>
        <div class="content">
        <img src='images/rf-actual-vs-predicted-2012-13.jpg' height=450 align='middle' style="border-style: none">
        </div>
        <p>Add extra comments.</p>
         <div class="content">
        <img src='images/rf-actual-vs-predicted-2013-14.jpg' height=450 align='middle' style="border-style: none">
        </div>
    </section>

    <section>
        <h1>
            <a id="cs109-FIFA" class="anchor" href="#cs109-fifa" aria-hidden="true"><span class="octicon octicon-link"></span></a>Conclusion</h1>

        <p>Fill in relevant details</p>
    </section>

    
      <footer> 
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
  </body> 
</html>
<!doctype html>

